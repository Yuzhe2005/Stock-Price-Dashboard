# API 配额和"刷新"说明

## 🔄 "刷新"是什么意思？

### 三种"刷新"都会消耗API配额：

1. **页面首次加载**
   - 用户打开网站时
   - 自动加载30个股票数据
   - = 30次API请求

2. **点击网站上的"Refresh Data"按钮**
   - 在网页上点击刷新按钮
   - 重新获取30个股票数据
   - = 30次API请求

3. **浏览器刷新页面（F5）**
   - 按F5或点击浏览器刷新按钮
   - 页面重新加载，重新获取数据
   - = 30次API请求

## 📊 API 配额计算

### Alpha Vantage 免费版限制：
- **每天500次API请求**
- **每分钟5次API请求**

### 你的项目配置：
- **30个股票**
- **每次刷新 = 30次API请求**

### 计算：

```
每天500次 ÷ 30个股票 = 约16次完整刷新
```

这意味着：
- ✅ 可以刷新页面约**16次/天**
- ✅ 或点击"Refresh Data"按钮约**16次/天**
- ✅ 或混合使用，总共约**16次**

### 示例：

**场景1：正常使用**
```
第1次打开网站 = 30次请求
点击刷新按钮1次 = 30次请求
点击刷新按钮2次 = 30次请求
...
可以刷新约16次，总共480次请求（还有20次余量）
```

**场景2：超过限制**
```
如果已经用了490次请求
再刷新1次（30个股票）
= 总共520次请求
→ 超过500次限制
→ 第17次刷新时，API会返回错误
→ 那些股票不会显示数据
```

## 🎯 实际使用场景

### 开发/测试阶段：
- 你可能会频繁刷新测试
- 30个股票 = 可以测试约16次
- 如果超过限制，需要等到第二天重置

### 演示/面试阶段：
- 通常只需要刷新几次
- 30个股票足够使用
- 不会超过限制

### 用户使用阶段：
- 普通用户不会频繁刷新
- 30个股票完全够用

## ⚠️ 重要提示

### API配额是共享的：
- 所有刷新方式共享同一个配额
- 无论是页面加载还是按钮点击
- 都从500次配额中扣除

### 配额重置：
- 每天重置（通常是UTC时间午夜）
- 不是按24小时滚动计算的

### 如果超过限制：
- API会返回错误信息
- 代码中会处理错误（返回null）
- 那些股票不会显示在表格中
- 但网站仍然可以运行

## 💡 优化建议

### 当前配置（30个股票）很好，因为：
- ✅ 足够展示功能（搜索、排序等）
- ✅ API配额充足（可以刷新16次）
- ✅ 加载速度快
- ✅ 涵盖主要公司和行业

### 如果配额不够用：
- 可以减少股票数量（比如20个）
- 或注册多个API Key（如果允许）
- 或升级到付费API（通常不需要）

## 📝 总结

**"刷新"包括：**
1. ✅ 页面首次加载
2. ✅ 点击网站上的"Refresh Data"按钮  
3. ✅ 浏览器刷新（F5）

**每次刷新：**
- 30个股票 = 30次API请求

**配额限制：**
- 每天500次请求
- 30个股票 = 约16次刷新/天

**你的项目配置：**
- 30个股票是很好的平衡
- 足够演示，又不会太快用完配额

---

希望这个解释清楚了！如果还有疑问，随时问我！😊

